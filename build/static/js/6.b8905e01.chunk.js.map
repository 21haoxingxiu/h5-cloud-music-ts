{"version":3,"sources":["components/Header/index.tsx","components/MusicNote/index.tsx","containers/SongList/styles.ts","containers/SongList/index.tsx","containers/Album/styles.ts","components/AlbumDetail/styles.ts","components/AlbumDetail/index.tsx","containers/Album/store/actionCreators.ts","containers/Album/store/services.ts","containers/Album/index.tsx"],"names":["HeaderContainer","styled","div","style","Header","React","props","ref","handleClick","title","isMarquee","className","onClick","Container","MusicNote","forwardRef","iconsRef","useRef","transform","prefixStyle","createNode","txt","template","tempNode","document","createElement","innerHTML","firstChild","useEffect","nodeRef","current","i","node","appendChild","slice","call","children","forEach","item","setAttribute","addEventListener","this","display","querySelector","startAnimation","x","y","getAttribute","left","top","setTimeout","useImperativeHandle","memo","SongList","showBackground","SongItem","ul","noWrap","SongsList","refs","useState","startIndex","setStartIndex","songs","collectCount","showCollect","loading","usePageSplit","musicAnimation","changePlayListDispatch","changeCurrentIndexDispatch","changeSequencePlayListDispatch","totalCount","length","ONE_PAGE_COUNT","count","selectItem","e","index","nativeEvent","clientX","clientY","Math","floor","list","res","end","push","key","id","name","ar","getName","artists","al","album","songList","connect","state","fullScreen","player","playing","currentSong","scrollY","dispatch","data","changePlayList","changeCurrentIndex","changeSequencePlayList","play","background","TopDesc","Menu","currentAlbum","pullUpLoading","coverImgUrl","src","alt","subscribedCount","creator","avatarUrl","nickname","tracks","changeLoading","type","CHANGE_LOADING","getAlbumList","fromURL","axiosInstance","get","getRecommendListDetailRequest","then","playlist","CHANGE_CURRENT_ALBUM","changeCurrentAlbum","catch","console","log","getAlbumDataDispatch","actionTypes","changePullUpLoadingStateDispatch","CHANGE_PULL_UP_LOADING","withRouter","history","match","setTitle","headerEl","handleBack","goBack","setIsMarquee","params","musicNoteRef","pathName","location","pathname","urlStr","test","CSSTransition","in","timeout","classNames","appear","unmountOnExit","onExited","Object","keys","Scroll","onScroll","pos","minScrollY","HEADER_HEIGHT","percent","abs","headerDom","backgroundColor","opacity","min","handleScroll","pullUp","bounceTop","Loading"],"mappings":"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","file":"static/js/6.b8905e01.chunk.js","sourcesContent":["import * as React from 'react';\nimport styled from 'styled-components';\nimport style from 'assets/globalStyle';\n\nconst HeaderContainer = styled.div`\n  position: fixed;\n  padding: 5px 10px;\n  padding-top: 0;\n  height: 40px;\n  width: 100%;\n  z-index: 100;\n  display: flex;\n  line-height: 40px;\n  color: ${style['font-color-light']};\n  .back {\n    margin-right: 5px;\n    font-size: 20px;\n    width: 20px;\n  }\n  > h1 {\n    font-size: ${style['font-size-l']};\n    font-weight: 700;\n  }\n`;\n\ninterface HeaderProps {\n  handleClick: () => void;\n  title: string;\n  isMarquee: boolean;\n}\n// 处理函数组件拿不到ref的问题,所以用forwardRef\nconst Header = React.forwardRef((props: HeaderProps, ref) => {\n  const { handleClick = () => {}, title = '标题', isMarquee = false } = props;\n  return (\n    <HeaderContainer ref={ref as any}>\n      <i className='iconfont back' onClick={handleClick}>\n        &#xe6e5;\n      </i>\n      {// eslint-disable-next-line\n      isMarquee ? (\n        <div className='marquee'>\n          <h1>{title}</h1>\n        </div>\n      ) : (\n        <h1>{title}</h1>\n      )}\n    </HeaderContainer>\n  );\n});\n\nexport default React.memo(Header);\n","import React, {\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  forwardRef,\n} from 'react';\nimport styled from 'styled-components';\nimport { prefixStyle } from 'utils';\nimport style from 'assets/globalStyle';\n\ninterface IPos {\n  x: number;\n  y: number;\n}\n\nconst Container = styled.div`\n  .icon_wrapper {\n    position: fixed;\n    z-index: 1000;\n    margin-top: -10px;\n    margin-left: -10px;\n    color: ${style['theme-color']};\n    font-size: 14px;\n    display: none;\n    transition: transform 1s cubic-bezier(0.62, -0.1, 0.86, 0.57);\n    transform: translate3d(0, 0, 0);\n    > div {\n      transition: transform 1s;\n    }\n  }\n`;\n\nexport interface IMusicNote {\n  startAnimation: (e: IPos) => void;\n}\n\nconst MusicNote = forwardRef<IMusicNote>((props, ref) => {\n  const iconsRef = useRef<HTMLDivElement>();\n\n  const ICON_NUMBER = 1;\n\n  const transform: any = prefixStyle('transform');\n\n  const createNode = (txt: string) => {\n    const template = `<div class='icon_wrapper'>${txt}</div>`;\n    let tempNode = document.createElement('div');\n    tempNode.innerHTML = template;\n    return tempNode.firstChild;\n  };\n\n  useEffect(() => {\n    const nodeRef = iconsRef.current!;\n    for (let i = 0; i < ICON_NUMBER; i++) {\n      let node = createNode(`<div class=\"iconfont\">&#xe62d;</div>`)!;\n      nodeRef.appendChild(node);\n    }\n    let domArray = [].slice.call(nodeRef.children);\n    domArray.forEach((item: HTMLDivElement) => {\n      item.setAttribute('running', 'false');\n      item.addEventListener(\n        'transitionend',\n        function () {\n          this.style.display = 'none';\n          this.style[transform] = `translate3d(0, 0, 0)`;\n          this.setAttribute('running', 'false');\n          let icon = this.querySelector('div')!;\n          icon.style[transform] = `translate3d(0, 0, 0)`;\n        },\n        false\n      );\n    });\n    // eslint-disable-next-line\n  }, []);\n\n  const startAnimation = ({ x, y }: any) => {\n    const nodeRef = iconsRef.current!;\n    for (let i = 0; i < ICON_NUMBER; i++) {\n      let domArray = [].slice.call(nodeRef.children);\n      let item: HTMLDivElement = domArray[i];\n      // 选择一个空闲的元素来开始动画\n      if (item.getAttribute('running') === 'false') {\n        item.style.left = x + 'px';\n        item.style.top = y + 'px';\n        item.style.display = 'inline-block';\n        setTimeout(() => {\n          item.setAttribute('running', 'true');\n          item.style[transform] = `translate3d(-40px, 750px, 0)`;\n          let icon = item.querySelector('div')!;\n          icon.style[transform] = `translate3d(-40px, 0, 0)`;\n        }, 20);\n        break;\n      }\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    startAnimation,\n  }));\n\n  return <Container ref={iconsRef as any} />;\n});\n\nexport default React.memo(MusicNote);\n","import styled from 'styled-components';\nimport style from 'assets/globalStyle';\n\ninterface SongListProps {\n  showBackground: boolean;\n  ref: any;\n}\nexport const SongList = styled.div`\n  border-radius: 10px;\n  opacity: 0.98;\n  ${(props: SongListProps) =>\n    props.showBackground\n      ? `background: ${style['highlight-background-color']}`\n      : ''}\n  .first_line {\n    box-sizing: border-box;\n    padding: 10px 0;\n    margin-left: 10px;\n    position: relative;\n    justify-content: space-between;\n    border-bottom: 1px solid ${style['border-color']};\n    .play_all {\n      display: inline-block;\n      line-height: 24px;\n      color: ${style['font-color-desc']};\n      .iconfont {\n        font-size: 24px;\n        margin-right: 10px;\n        vertical-align: top;\n      }\n      .sum {\n        font-size: ${style['font-size-s']};\n        color: ${style['font-color-desc-v2']};\n      }\n      > span {\n        vertical-align: top;\n      }\n    }\n    .add_list,\n    .isCollected {\n      display: flex;\n      align-items: center;\n      position: absolute;\n      right: 0;\n      top: 0px;\n      bottom: 0;\n      width: 130px;\n      line-height: 34px;\n      background: ${style['theme-color']};\n      color: ${style['font-color-light']};\n      font-size: 0;\n      border-radius: 3px;\n      vertical-align: top;\n      .iconfont {\n        vertical-align: top;\n        font-size: 10px;\n        margin: 0 5px 0 10px;\n      }\n      span {\n        font-size: 14px;\n        line-height: 34px;\n      }\n    }\n    .isCollected {\n      display: flex;\n      background: ${style['background-color']};\n      color: ${style['font-color-desc']};\n    }\n  }\n`;\nexport const SongItem = styled.ul`\n  > li {\n    display: flex;\n    height: 60px;\n    align-items: center;\n    .index {\n      flex-basis: 60px;\n      width: 60px;\n      height: 60px;\n      line-height: 60px;\n      text-align: center;\n    }\n    .info {\n      box-sizing: border-box;\n      flex: 1;\n      display: flex;\n      height: 100%;\n      padding: 5px 0;\n      flex-direction: column;\n      justify-content: space-around;\n      border-bottom: 1px solid ${style['border-color']};\n      ${style.noWrap()}\n      >span {\n        ${style.noWrap()}\n      }\n      > span:first-child {\n        color: ${style['font-color-desc']};\n      }\n      > span:last-child {\n        font-size: ${style['font-size-s']};\n        color: #bba8a8;\n      }\n    }\n  }\n`;\n","import React, { useState, useEffect } from 'react';\nimport { SongList, SongItem } from './styles';\nimport { getName } from 'utils/index';\nimport { ONE_PAGE_COUNT } from 'utils/config';\nimport { connect } from 'react-redux';\nimport {\n  changePlayList,\n  changeCurrentIndex,\n  changeSequencePlayList,\n} from 'containers/Player/store/actionCreators';\n\ninterface SongListProps {\n  songs: any;\n  collectCount: number;\n  showCollect?: boolean;\n  loading?: boolean;\n  usePageSplit?: boolean;\n  musicAnimation?: any;\n  changePlayListDispatch: any;\n  changeCurrentIndexDispatch: any;\n  changeSequencePlayListDispatch: any;\n  showBackground?: boolean;\n}\nconst SongsList = React.forwardRef((props: SongListProps, refs) => {\n  const [startIndex, setStartIndex] = useState(0);\n\n  const {\n    songs = [],\n    collectCount,\n    showCollect = true,\n    loading = false,\n    usePageSplit = false,\n    showBackground = false,\n  } = props;\n\n  const { musicAnimation } = props;\n\n  const {\n    changePlayListDispatch,\n    changeCurrentIndexDispatch,\n    changeSequencePlayListDispatch,\n  } = props;\n  const totalCount = songs.length;\n\n  useEffect(() => {\n    if (!loading) return;\n    if (startIndex + 1 + ONE_PAGE_COUNT >= totalCount) return;\n    setStartIndex(startIndex + ONE_PAGE_COUNT);\n  }, [loading, startIndex, totalCount]);\n\n  const selectItem = (e: any, index: number) => {\n    changePlayListDispatch(songs);\n    changeSequencePlayListDispatch(songs);\n    changeCurrentIndexDispatch(index);\n    musicAnimation(e.nativeEvent.clientX, e.nativeEvent.clientY);\n  };\n\n  let songList = (list: any[]) => {\n    let res = [];\n    // 判断页数是否超过总数\n    let end = usePageSplit ? startIndex + ONE_PAGE_COUNT : list.length;\n    for (let i = 0; i < end; i++) {\n      if (i >= list.length) break;\n      let item = list[i];\n      res.push(\n        <li key={item.id} onClick={e => selectItem(e, i)}>\n          <span className='index'>{i + 1}</span>\n          <div className='info'>\n            <span>{item.name}</span>\n            <span>\n              {item.ar ? getName(item.ar) : getName(item.artists)} -{' '}\n              {item.al ? item.al.name : item.album.name}\n            </span>\n          </div>\n        </li>\n      );\n    }\n    return res;\n  };\n\n  const collect = (count: number) => {\n    return (\n      <div className='add_list'>\n        <i className='iconfont'>&#xe600;</i>\n        <span>收藏({Math.floor(count / 1000) / 10}万)</span>\n      </div>\n      // <div className=\"isCollected\">\n      //   <span>已收藏({Math.floor(count/1000)/10}万)</span>\n      // </div>\n    );\n  };\n  return (\n    <SongList ref={refs as any} showBackground={showBackground}>\n      <div className='first_line'>\n        <div className='play_all' onClick={e => selectItem(e, 0)}>\n          <i className='iconfont'>&#xe73d;</i>\n          <span>\n            播放全部 <span className='sum'>(共{totalCount}首)</span>\n          </span>\n        </div>\n        {showCollect ? collect(collectCount) : null}\n      </div>\n      <SongItem>{songList(songs)}</SongItem>\n    </SongList>\n  );\n});\n\n// 映射Redux全局的state到组件的props上\nconst mapStateToProps = (state: any) => ({\n  fullScreen: state.player.fullScreen,\n  playing: state.player.playing,\n  currentSong: state.player.currentSong,\n  scrollY: state.player.scrollY,\n});\n// 映射dispatch到props上\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    changePlayListDispatch(data: any) {\n      dispatch(changePlayList(data));\n    },\n    changeCurrentIndexDispatch(data: any) {\n      dispatch(changeCurrentIndex(data));\n    },\n    changeSequencePlayListDispatch(data: any) {\n      dispatch(changeSequencePlayList(data));\n    },\n  };\n};\n\n// 将ui组件包装成容器组件\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(React.memo(SongsList));\n","import styled from 'styled-components';\nimport style from 'assets/globalStyle';\n\nexport const Container = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: ${(props: any) => (props.play > 0 ? '60px' : 0)};\n  width: 100%;\n  z-index: 100;\n  overflow: hidden;\n  background: #f2f3f4;\n  transform-origin: right bottom;\n  &.fly-enter,\n  &.fly-appear {\n    // transform: rotateZ(30deg) translate3d(100%, 0, 0);\n    opacity: 0;\n    transform: scale(1.1);\n  }\n  &.fly-enter-active,\n  &.fly-appear-active {\n    // transition: transform .3s;\n    // transform: rotateZ(0deg) translate3d(0, 0, 0);\n    opacity: 1;\n    transform: scale(1);\n    transition: opacity 300ms, transform 300ms;\n  }\n  &.fly-exit {\n    // transform: rotateZ(0deg) translate3d(0, 0, 0);\n    opacity: 1;\n    transform: scale(1);\n  }\n  &.fly-exit-active {\n    // transition: transform .3s;\n    // transform: rotateZ(30deg) translate3d(100%, 0, 0);\n    opacity: 0;\n    transform: scale(0.9);\n    transition: opacity 300ms, transform 300ms;\n  }\n`;\nexport const TopDesc = styled.div`\n  background-size: 100%;\n  padding: 5px 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  box-sizing: border-box;\n  width: 100%;\n  height: 200px;\n  position: relative;\n  z-index: 100;\n  .background{\n    /* z-index: -1; */\n    background: url(${(props: any) => props.background}) left top no-repeat;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    filter: blur(20px);\n    transform: scale(1.5);\n  }\n  .img_wrapper{\n    width: 120px;\n    height: 120px;\n    position: relative;\n    .decorate {\n      position: absolute;\n      top: 0;\n      width: 100%;\n      height: 35px;\n      border-radius: 3px;\n      background: linear-gradient(hsla(0,0%,43%,.4),hsla(0,0%,100%,0));\n    }\n    .play_count {\n      position: absolute;\n      right: 2px;\n      top: 2px;\n      font-size: ${style['font-size-s']};\n      line-height: 15px;\n      color: ${style['font-color-light']};\n      .play{\n        vertical-align: top;\n      }\n    }\n    img{\n      width: 120px;\n      height: 120px;\n      border-radius:3px;\n    }\n  }\n  .desc_wrapper {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    height: 120px;\n    padding: 0 10px;\n    .title{\n      max-height: 70px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: ${style['font-color-desc']};\n      font-weight: 700;\n      line-height: 1.5;\n      font-size: ${style['font-size-l']};\n    }\n    .person{\n      display: flex;\n      .avatar{\n        width: 20px;\n        height: 20px;\n        margin-right: 5px;\n        img{\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n        }\n      }\n      .name {\n        line-height: 20px;\n        font-size: ${style['font-size-m']};\n        color: ${style['font-color-desc']};\n      }\n    }\n  }\n`;\n\nexport const Menu = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  box-sizing: border-box;\n  margin: 0 30px;\n  margin-top: -20px;\n  margin-bottom: 10px;\n  >div {\n    display: flex;\n    flex-direction: column;\n    line-height: 20px;\n    text-align: center;\n    font-size: ${style['font-size-s']};\n    color: #3b1f1f;\n    color: ${style['font-color-desc']};\n    z-index:1000;\n    font-weight: 500;\n    .iconfont {\n      font-size: 20px;\n    }\n  }\n`;\n\nexport const SongList = styled.div`\n  border-radius: 10px;\n  opacity: 0.98;\n  .first_line {\n    box-sizing: border-box;\n    padding: 10px 0;\n    margin-left: 10px;\n    position: relative;\n    justify-content: space-between;\n    border-bottom: 1px solid ${style['border-color']};\n    .play_all {\n      display: inline-block;\n      line-height: 24px;\n      color: ${style['font-color-desc']};\n      .iconfont {\n        font-size: 24px;\n        margin-right: 10px;\n        vertical-align: top;\n      }\n      .sum {\n        font-size: ${style['font-size-s']};\n        color: ${style['font-color-desc-v2']};\n      }\n      > span {\n        vertical-align: top;\n      }\n    }\n    .add_list {\n      display: flex;\n      align-items: center;\n      position: absolute;\n      right: 0;\n      top: 0px;\n      bottom: 0;\n      width: 130px;\n      line-height: 34px;\n      background: ${style['theme-color']};\n      color: ${style['font-color-light']};\n      font-size: 0;\n      border-radius: 3px;\n      vertical-align: top;\n      .iconfont {\n        vertical-align: top;\n        font-size: 10px;\n        margin: 0 5px 0 10px;\n      }\n      span {\n        font-size: 14px;\n        line-height: 34px;\n      }\n    }\n  }\n`;\nexport const SongItem = styled.ul`\n  > li {\n    display: flex;\n    height: 60px;\n    align-items: center;\n    .index {\n      width: 60px;\n      height: 60px;\n      line-height: 60px;\n      text-align: center;\n    }\n    .info {\n      box-sizing: border-box;\n      flex: 1;\n      display: flex;\n      height: 100%;\n      padding: 5px 0;\n      flex-direction: column;\n      justify-content: space-around;\n      border-bottom: 1px solid ${style['border-color']};\n      > span:first-child {\n        color: ${style['font-color-desc']};\n      }\n      > span:last-child {\n        font-size: ${style['font-size-s']};\n        color: #bba8a8;\n      }\n    }\n  }\n`;\n","import styled from 'styled-components';\nimport style from 'assets/globalStyle';\n\ninterface Props {\n  background: string;\n}\nexport const TopDesc = styled.div`\n  background-size: 100%;\n  padding: 5px 20px;\n  padding-bottom: 50px;\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  height: 275px;\n  position: relative;\n  .background {\n    z-index: -1;\n    background: url(${(props: Props) => props.background}) left top no-repeat;\n    background: contain;\n    background-position: 0 0;\n    background-size: 100% 100%;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    filter: blur(20px);\n    .filter {\n      position: absolute;\n      z-index: 10;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(7, 17, 27, 0.2);\n    }\n  }\n  .img_wrapper {\n    width: 120px;\n    height: 120px;\n    position: relative;\n    .decorate {\n      position: absolute;\n      top: 0;\n      width: 100%;\n      height: 35px;\n      border-radius: 3px;\n      background: linear-gradient(hsla(0, 0%, 43%, 0.4), hsla(0, 0%, 100%, 0));\n    }\n    .play_count {\n      position: absolute;\n      right: 2px;\n      top: 2px;\n      font-size: ${style['font-size-s']};\n      line-height: 15px;\n      color: ${style['font-color-light']};\n      .play {\n        vertical-align: top;\n      }\n    }\n    img {\n      width: 120px;\n      height: 120px;\n      border-radius: 3px;\n    }\n  }\n  .desc_wrapper {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    height: 120px;\n    padding: 0 10px;\n    .title {\n      max-height: 70px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: ${style['font-color-light']};\n      font-weight: 700;\n      line-height: 1.5;\n      font-size: ${style['font-size-l']};\n    }\n    .person {\n      display: flex;\n      .avatar {\n        width: 20px;\n        height: 20px;\n        margin-right: 5px;\n        img {\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n        }\n      }\n      .name {\n        line-height: 20px;\n        font-size: ${style['font-size-m']};\n        color: ${style['font-color-desc-v2']};\n      }\n    }\n  }\n`;\nexport const Menu = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  box-sizing: border-box;\n  padding: 0 30px 20px 30px;\n  margin: -100px 0 0 0;\n  > div {\n    display: flex;\n    flex-direction: column;\n    line-height: 20px;\n    text-align: center;\n    font-size: ${style['font-size-s']};\n    color: #3b1f1f;\n    color: ${style['font-color-light']};\n    z-index: 1000;\n    font-weight: 500;\n    .iconfont {\n      font-size: 20px;\n    }\n  }\n`;\n","import React from 'react';\nimport { TopDesc, Menu } from './styles';\nimport SongsList from 'containers/SongList';\n\nexport interface AlbumDetailProps {\n  currentAlbum: object;\n  pullUpLoading: boolean;\n  musicAnimation?: boolean;\n}\n\nfunction AlbumDetail(props: any) {\n  const { currentAlbum, pullUpLoading, musicAnimation } = props;\n\n  const renderTopDesc = () => {\n    return (\n      <TopDesc background={currentAlbum.coverImgUrl}>\n        <div className='background'>\n          <div className='filter'></div>\n        </div>\n        <div className='img_wrapper'>\n          <div className='decorate'></div>\n          <img src={currentAlbum.coverImgUrl} alt='' />\n          <div className='play_count'>\n            <i className='iconfont play'>&#xe61f;</i>\n            <span className='count'>\n              {Math.floor(currentAlbum.subscribedCount / 1000) / 10}万\n            </span>\n          </div>\n        </div>\n        <div className='desc_wrapper'>\n          <div className='title'>{currentAlbum.name}</div>\n          <div className='person'>\n            <div className='avatar'>\n              <img src={currentAlbum.creator.avatarUrl} alt='' />\n            </div>\n            <div className='name'>{currentAlbum.creator.nickname}</div>\n          </div>\n        </div>\n      </TopDesc>\n    );\n  };\n\n  const renderMenu = () => {\n    return (\n      <Menu>\n        <div>\n          <i className='iconfont'>&#xe655;</i>\n          评论\n        </div>\n        <div>\n          <i className='iconfont'>&#xe616;</i>\n          点赞\n        </div>\n        <div>\n          <i className='iconfont'>&#xeaf8;</i>\n          收藏\n        </div>\n        <div>\n          <i className='iconfont'>&#xe617;</i>\n          更多\n        </div>\n      </Menu>\n    );\n  };\n  const renderSongList = () => {\n    return (\n      <SongsList\n        songs={currentAlbum.tracks}\n        collectCount={currentAlbum.subscribedCount}\n        showCollect={true}\n        loading={pullUpLoading}\n        musicAnimation={musicAnimation}\n        showBackground={true}\n      />\n    );\n  };\n\n  return (\n    <div>\n      {renderTopDesc()}\n      {renderMenu()}\n      {renderSongList()}\n    </div>\n  );\n}\n\nexport default React.memo(AlbumDetail);\n","/*\n * @Description: new file\n * @Autor: zhan\n * @Date: 2020-06-09 08:36:40\n * @LastEditors: zhan\n * @LastEditTime: 2020-07-20 13:33:50\n */ \nimport {\n  CHANGE_CURRENT_ALBUM,\n  CHANGE_LOADING,\n  CHANGE_PULL_UP_LOADING,\n} from './constants';\nimport { getRecommendListDetailRequest } from './services';\n\nexport const changeCurrentAlbum = (data: any) => ({\n  type: CHANGE_CURRENT_ALBUM,\n  data,\n});\n\nexport const changePullUpLoading = (data: boolean) => ({\n  type: CHANGE_PULL_UP_LOADING,\n  data,\n});\n\nexport const changeLoading = (data: boolean) => ({\n  type: CHANGE_LOADING,\n  data,\n});\nexport const getAlbumList = (id: number, fromURL: string) => {\n  return (dispatch: any) => {\n    dispatch(changeLoading(true));\n    getRecommendListDetailRequest(id)\n      .then((res: any) => {\n        dispatch(changeLoading(false));\n        let data = res.playlist;\n        dispatch(changeCurrentAlbum(data));\n        // dispatch(changeStartIndex(0));\n        // dispatch(changeTotalCount(data.tracks.length))\n      })\n      .catch(() => {\n        console.log('获取album数据失败!');\n      });\n  };\n};\n","import { axiosInstance } from 'utils/request';\n\nexport const getRecommendListDetailRequest = (id: number) => {\n  return axiosInstance.get(`/playlist/detail?id=${id}`);\n};\n","import React, { useRef, useEffect, useState, } from 'react';\nimport { withRouter, } from 'react-router-dom';\nimport { CSSTransition } from 'react-transition-group';\nimport { connect } from 'react-redux';\n\nimport { Container } from './styles';\nimport Header from 'components/Header';\nimport Scroll from 'components/Scroll';\nimport style from 'assets/globalStyle';\nimport { HEADER_HEIGHT } from 'utils/config';\nimport { RouteConfigComponentProps } from 'react-router-config';\nimport AlbumDetail from 'components/AlbumDetail';\nimport * as actionTypes from './store/actionCreators';\nimport { LoadingContainer } from 'assets/globalStyle';\nimport Loading from 'components/Loading';\nimport MusicNote from 'components/MusicNote';\nimport { IMusicNote } from 'components/MusicNote';\nimport { AppState } from 'store';\n\ninterface IPos {\n  x: number;\n  y: number;\n}\ninterface AlbumProps extends RouteConfigComponentProps {\n  currentAlbum: any;\n  loading: boolean;\n  pullUpLoading?: boolean;\n  getAlbumDataDispatch: any;\n  changePullUpLoadingStateDispatch: any;\n  history: any;\n  match: any;\n}\n\nconst Album: React.FC<AlbumProps> = ({\n  history,\n  match,\n  currentAlbum,\n  loading,\n  pullUpLoading,\n  getAlbumDataDispatch,\n  changePullUpLoadingStateDispatch,\n}) => {\n  const [title, setTitle] = useState('歌单');\n  const headerEl = useRef<HTMLDivElement>();\n  const handleBack = () => history.goBack();\n  const [isMarquee, setIsMarquee] = useState(false);\n  const {\n    params: { id },\n  } = match;\n  const musicNoteRef = useRef<IMusicNote>(null);\n\n  useEffect(() => {\n    const pathName = history.location.pathname;\n    let urlStr: string = '';\n    if (/recommend/.test(pathName)) {\n      urlStr = '/recommend';\n    } else if (/rank/.test(pathName)) {\n      urlStr = '/rank';\n    }\n    getAlbumDataDispatch(id, urlStr);\n  }, [id, history.location.pathname, getAlbumDataDispatch]);\n\n  const handleScroll = (pos: IPos) => {\n    let minScrollY = -HEADER_HEIGHT;\n    let percent = Math.abs(pos.y / minScrollY);\n    let headerDom: HTMLDivElement = headerEl.current!;\n    // props.changeScrollYDispatch(pos.);\n    if (pos.y < minScrollY && headerDom) {\n      headerDom.style.backgroundColor = style['theme-color'];\n      headerDom.style.opacity = '' + Math.min(1, (percent - 1) / 2);\n      setTitle(currentAlbum.name);\n      setIsMarquee(true);\n    } else {\n      headerDom.style.backgroundColor = '';\n      headerDom.style.opacity = '1';\n      setTitle('歌单');\n      setIsMarquee(false);\n    }\n  };\n\n  const handlePullUp = () => {\n    changePullUpLoadingStateDispatch(true);\n    changePullUpLoadingStateDispatch(false);\n  };\n\n  const musicAnimation = (x: number, y: number) => {\n    const musicNoteNode = musicNoteRef.current!;\n    musicNoteNode.startAnimation({ x, y });\n  };\n  return (\n    <CSSTransition\n      in={true}\n      timeout={300}\n      classNames='fly'\n      appear={true}\n      unmountOnExit\n      onExited={handleBack}\n    >\n      <Container>\n        <Header\n          ref={headerEl}\n          title={title}\n          handleClick={handleBack}\n          isMarquee={isMarquee}\n        ></Header>\n        {Object.keys(currentAlbum).length !== 0 ? (\n          <Scroll\n            onScroll={(pos: IPos) => handleScroll(pos)}\n            pullUp={() => handlePullUp()}\n            pullUpLoading={pullUpLoading}\n            bounceTop={false}\n          >\n            <AlbumDetail\n              currentAlbum={currentAlbum}\n              pullUpLoading={pullUpLoading}\n              musicAnimation={musicAnimation}\n            />\n          </Scroll>\n        ) : null}\n        {loading ? (\n          <LoadingContainer>\n            <Loading />\n          </LoadingContainer>\n        ) : null}\n        <MusicNote ref={musicNoteRef}></MusicNote>\n      </Container>\n    </CSSTransition>\n  );\n};\n\n// 映射Redux全局的state到组件的props上\nconst mapStateToProps = (state: AppState) => ({\n  currentAlbum: state.album.currentAlbum,\n  loading: state.album.loading,\n});\n\n// 映射dispatch到props上\nconst mapDispatchToProps = (dispatch: any) => {\n  return {\n    getAlbumDataDispatch(id: number, fromURL: string) {\n      dispatch(actionTypes.getAlbumList(id, fromURL));\n    },\n    changePullUpLoadingStateDispatch(loading: boolean) {\n      dispatch(actionTypes.changePullUpLoading(loading));\n    },\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(React.memo(withRouter(Album)));\n"],"sourceRoot":""}